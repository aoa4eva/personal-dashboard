<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nakai Template</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <!-- Navigation Menu -->
    <nav class="navbar navbar-expand-lg navbar-dark" id="main-navbar">
        <div class="container-fluid">
            <a class="navbar-brand" href="#">Nakai Template</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link active" aria-current="page" href="#">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" data-bs-toggle="modal" data-bs-target="#settingsModal">Settings</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">About</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Alarm Notification Overlay -->
    <div id="alarm-notification" class="alarm-notification hidden">
        <div class="alarm-notification-content">
            <div class="alarm-notification-icon">üîî</div>
            <div class="alarm-notification-title">Reminder!</div>
            <div class="alarm-notification-label" id="alarm-notification-label"></div>
            <div class="alarm-notification-datetime">
                <div class="alarm-notification-date" id="alarm-notification-date"></div>
                <div class="alarm-notification-time" id="alarm-notification-time"></div>
            </div>
            <button class="btn btn-lg btn-danger" id="dismiss-alarm">Dismiss</button>
        </div>
    </div>

    <div class="main-container">
        <!-- Time Display -->
        <div class="time-section">
            <div id="time" class="time"></div>
            <div id="date" class="date"></div>
        </div>

        <!-- Greeting -->
        <div class="greeting-section">
            <div id="greeting" class="greeting"></div>
        </div>

        <!-- Weather Widget -->
        <div id="weather-widget" class="weather-widget hidden">
            <div class="weather-content">
                <div class="weather-icon" id="weather-icon"></div>
                <div class="weather-info">
                    <div class="weather-temp" id="weather-temp"></div>
                    <div class="weather-description" id="weather-description"></div>
                    <div class="weather-location" id="weather-location"></div>
                </div>
            </div>
            <div class="weather-error hidden" id="weather-error"></div>
        </div>

        <!-- Alarms Widget -->
        <div id="alarms-widget" class="alarms-widget hidden">
            <div class="alarms-header">
                <h3>Alarms</h3>
                <div class="alarms-header-actions">
                    <button id="voice-alarm-btn" class="btn btn-circle btn-voice" title="Add alarm by voice">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 16 16">
                            <path d="M3.5 6.5A.5.5 0 0 1 4 7v1a4 4 0 0 0 8 0V7a.5.5 0 0 1 1 0v1a5 5 0 0 1-4.5 4.975V14h.5a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1H7v-1.025A5 5 0 0 1 2.5 8V7a.5.5 0 0 1 .5-.5z"/>
                            <path d="M10 8a2 2 0 1 1-4 0V3a2 2 0 1 1 4 0v5zM8 0a3 3 0 0 0-3 3v5a3 3 0 0 0 6 0V3a3 3 0 0 0-3-3z"/>
                        </svg>
                    </button>
                    <button id="add-alarm-btn" class="btn btn-sm btn-primary">+ Add</button>
                    <button id="close-alarms-widget" class="btn btn-circle btn-close-widget" title="Hide alarms widget">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                            <path d="M2.146 2.854a.5.5 0 1 1 .708-.708L8 7.293l5.146-5.147a.5.5 0 0 1 .708.708L8.707 8l5.147 5.146a.5.5 0 0 1-.708.708L8 8.707l-5.146 5.147a.5.5 0 0 1-.708-.708L7.293 8 2.146 2.854Z"/>
                        </svg>
                    </button>
                </div>
            </div>
            <div id="alarms-list" class="alarms-list">
                <!-- Alarm items will be added here dynamically -->
            </div>
            <div id="voice-status" class="voice-status hidden"></div>
        </div>

        <!-- Quote -->
        <div class="quote-section">
            <div id="quote" class="quote"></div>
            <div id="quote-author" class="quote-author"></div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="page-footer">
        <p>made with <span class="heart">‚ù§</span> by Claude Code</p>
    </footer>

    <!-- Settings Modal -->
    <div class="modal fade" id="settingsModal" tabindex="-1" aria-labelledby="settingsModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="settingsModalLabel">Settings</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="settings-form">
                        <div class="mb-3">
                            <label for="user-name-input" class="form-label">Your Name</label>
                            <input type="text" class="form-control" id="user-name-input" placeholder="Enter your name">
                        </div>
                        <div class="mb-3">
                            <label for="weather-api-token" class="form-label">Weather API Token</label>
                            <input type="text" class="form-control" id="weather-api-token" placeholder="Enter OpenWeatherMap API token">
                            <small class="form-text text-muted">Get a free API key at <a href="https://openweathermap.org/api" target="_blank" class="text-info">openweathermap.org</a></small>
                        </div>
                        <div class="mb-3">
                            <label for="weather-location-input" class="form-label">City Name</label>
                            <input type="text" class="form-control" id="weather-location-input" placeholder="e.g., London, Tokyo, New York">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Temperature Unit</label>
                            <div>
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="radio" name="temperature-unit" id="unit-celsius" value="metric" checked>
                                    <label class="form-check-label" for="unit-celsius">Celsius (¬∞C)</label>
                                </div>
                                <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="radio" name="temperature-unit" id="unit-fahrenheit" value="imperial">
                                    <label class="form-check-label" for="unit-fahrenheit">Fahrenheit (¬∞F)</label>
                                </div>
                            </div>
                        </div>

                        <!-- Alarm Configuration Section -->
                        <hr class="my-4">
                        <h6 class="mb-3">Alarm Configuration</h6>

                        <div class="mb-3">
                            <div class="form-check form-switch">
                                <input class="form-check-input" type="checkbox" id="alarm-system-enabled" checked>
                                <label class="form-check-label" for="alarm-system-enabled">Enable Alarm System</label>
                            </div>
                            <small class="form-text text-muted">Voice alarms use browser's built-in speech recognition (no API key needed)</small>
                        </div>

                        <div class="mb-3">
                            <div class="form-check form-switch">
                                <input class="form-check-input" type="checkbox" id="alarms-widget-visible" checked>
                                <label class="form-check-label" for="alarms-widget-visible">Show Alarms Widget</label>
                            </div>
                        </div>

                        <div class="mb-3">
                            <label for="alarm-sound-upload" class="form-label">Custom Alarm Sound</label>
                            <input type="file" class="form-control" id="alarm-sound-upload" accept="audio/*">
                            <small class="form-text text-muted">Upload an audio file (MP3, WAV, OGG) to replace the default beep</small>
                        </div>

                        <div class="mb-3" id="current-sound-display">
                            <label class="form-label">Current Sound</label>
                            <div class="d-flex align-items-center gap-2 flex-wrap">
                                <span id="current-sound-name" class="badge bg-secondary">Default Beep</span>
                                <button type="button" class="btn btn-sm btn-outline-info" id="preview-alarm-sound">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" fill="currentColor" viewBox="0 0 16 16">
                                        <path d="M11.596 8.697l-6.363 3.692c-.54.313-1.233-.066-1.233-.697V4.308c0-.63.692-1.01 1.233-.696l6.363 3.692a.802.802 0 0 1 0 1.393z"/>
                                    </svg>
                                    Preview
                                </button>
                                <button type="button" class="btn btn-sm btn-outline-danger" id="reset-alarm-sound">Reset to Default</button>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" id="save-settings">Save Changes</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Add Alarm Modal -->
    <div class="modal fade" id="addAlarmModal" tabindex="-1" aria-labelledby="addAlarmModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="addAlarmModalLabel">Add New Alarm</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="add-alarm-form">
                        <div class="mb-3">
                            <label for="alarm-date-input" class="form-label">Date</label>
                            <input type="date" class="form-control" id="alarm-date-input" required>
                        </div>
                        <div class="mb-3">
                            <label for="alarm-time-input" class="form-label">Time</label>
                            <input type="time" class="form-control" id="alarm-time-input" required>
                        </div>
                        <div class="mb-3">
                            <label for="alarm-label-input" class="form-label">Label (Optional)</label>
                            <input type="text" class="form-control" id="alarm-label-input" placeholder="e.g., Wake up, Meeting">
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" id="save-alarm">Add Alarm</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Voice Confirmation Modal -->
    <div class="modal fade" id="voiceConfirmModal" tabindex="-1" aria-labelledby="voiceConfirmModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="voiceConfirmModalLabel">Confirm Reminder</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="alert alert-info mb-3">
                        <strong>You said:</strong> <span id="voice-transcript"></span>
                    </div>
                    <div class="parsed-alarm-info">
                        <p class="mb-2"><strong>Parsed Reminder:</strong></p>
                        <div class="alarm-preview">
                            <div class="alarm-preview-label" id="voice-parsed-label"></div>
                            <div class="alarm-preview-date" id="voice-parsed-date"></div>
                            <div class="alarm-preview-time" id="voice-parsed-time"></div>
                        </div>
                    </div>
                    <div class="mt-3">
                        <small class="text-muted">If this is incorrect, click "Try Again" and speak more clearly. Include the event description, date, time, and AM/PM.</small>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" id="voice-try-again">Try Again</button>
                    <button type="button" class="btn btn-primary" id="voice-confirm-alarm">Confirm</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS Bundle -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="js/script.js?v=10"></script>
</body>
</html>
